{"version":3,"sources":["constants/symbols.js","constants/events.js","constants/config.js","store/index.js","utils/event-handler.js","utils/assert.js","utils/stream-handler.js","wiki-events-player.js","constants/index.js","utils/create-element.js","elements/controls.js","utils/bind-events.js","utils/create-event-marker.js","elements/cursor.js","services/draw.js","services/player.js","elements/styles/frame-style.js","wiki-events.js"],"names":["_running","Symbol","_paused","_eventHandler","_streamHandler","stream","trackEvents","events","defer","dimensions","frames","since","document","ev","push","type","eventType","eventTarget","target","x","clientX","y","clientY","assertFunction","v","name","Error","trimLeft","config","WikiEventsPlayer","width","height","play","pause","resume","progress","complete","_playing","_draw","_currentFrame","_player","_playerDimensions","tag","className","ele","createElement","classList","add","controlsWrapper","playBtn","appendChild","createTextNode","onCompleteCallback","innerHTML","__internal_wiki_events__","addEventListener","on","div","style","top","left","cursor","src","draw","length","currentEvent","display","forEach","cb","setTimeout","window","requestAnimationFrame","documentContent","wikiEventsPlayerWrapper","wikiEventsPlayer","scrolling","onload","doc","contentDocument","open","write","outerHTML","close","stylesheet","record","Object","assign","defaultDimensions","bind","cloneNode","call","head","frameStyle","body","event","callback","filter","module","exports","WikiEvents","defaultConfig","eventHandler","streamHandler","documentElement","outerWidth","outerHeight","Date","now","start","isStream","store","removeEventListener","$wp"],"mappings":"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","file":"wiki-events.js","sourceRoot":"../src","sourcesContent":["export const _running = Symbol();\nexport const _paused = Symbol();\nexport const _eventHandler = Symbol();\nexport const _streamHandler = Symbol();\n","export default [\n  'dblclick',\n  'mousemove',\n  'mousedown',\n  'mouseup',\n  'scroll'\n];\n","import events from './events';\n\nexport default {\n  stream: null,\n  trackEvents: events,\n  defer: false,\n  dimensions: {}\n};\n","export default {\n  frames: [],\n  since: null,\n  document: null,\n};\n","import { _paused } from '../constants/symbols';\nimport store from '../store';\n\nexport default function(ev) {\n  if (!this[_paused]) {\n    store.frames.push({\n      type: 'event',\n      eventType: ev.type,\n      eventTarget: ev.target,\n      x: ev.clientX,\n      y: ev.clientY\n    });\n  }\n}\n","export function assertFunction(v, name) {\n  if (typeof v !== 'function') {\n    throw new Error(`${name || ''} must be a function`.trimLeft());\n  }\n}\n","import { assertFunction } from './assert';\nimport { _paused } from '../constants/symbols';\n\nexport default function(ev) {\n  if (!this[_paused]) {\n    assertFunction(this.config.stream);\n\n    this.config.stream({\n      type: 'event',\n      eventType: ev.type,\n      eventTarget: ev.target,\n      x: ev.clientX,\n      y: ev.clientY\n    });\n  }\n}\n","import {\n  _playing,\n  _paused,\n  _draw,\n  _currentFrame,\n  _player,\n  _playerDimensions,\n  defaultDimensions,\n  events\n} from './constants';\nimport bindEvents from './utils/bind-events';\nimport draw from './services/draw';\nimport player from './services/player';\nimport frameStyle from './elements/styles/frame-style';\n\nclass WikiEventsPlayer {\n  constructor(record = {}) {\n    this.record = record;\n    this.frames = record.frames;\n    this[_playerDimensions] = Object.assign({}, defaultDimensions, record.dimensions);\n    this[_currentFrame] = 0;\n    this[_playing] = false;\n    this[_paused] = false;\n    this[_draw] = draw.bind(this);\n    this[_player] = player(\n      this[_playerDimensions].width, this[_playerDimensions].height, this.record.document.cloneNode(true)\n    );\n\n    bindEvents.call(this);\n    document.head.appendChild(frameStyle);\n    document.body.appendChild(this[_player]);\n\n    return this;\n  }\n\n  play() {\n    this[_playing] = true;\n    this[_currentFrame] = 0;\n\n    this[_draw]();\n\n    return this;\n  }\n\n  pause() {\n    this[_paused] = true;\n\n    return this;\n  }\n\n  resume() {\n    this[_paused] = false;\n\n    this[_draw]();\n\n    return this;\n  }\n\n  on(event, callback) {\n    if (events[event]) {\n      events[event].push(callback);\n\n      return this;\n    }\n\n    throw new Error('invalid event');\n  }\n\n  off(event, callback) {\n    if (events[event]) {\n      if (callback) {\n        events[event] = events[event].filter(cb => callback !== cb);\n      } else {\n        events[event] = events[event].filter(cb => cb.__internal_wiki_events__);\n      }\n\n      return this;\n    }\n\n    throw new Error('invalid event');\n  }\n}\n\nmodule.exports = WikiEventsPlayer;\n","export const defaultDimensions = {\n  width: 800,\n  height: 600\n};\nexport const events = {\n  play: [],\n  pause: [],\n  resume: [],\n  progress: [],\n  complete: [],\n};\nexport const _playing = Symbol();\nexport const _paused = Symbol();\nexport const _draw = Symbol();\nexport const _currentFrame = Symbol();\nexport const _player = Symbol();\nexport const _playerDimensions = Symbol();\n","export default function(tag, className) {\n  const ele = document.createElement(tag);\n\n  ele.classList.add(className);\n\n  return ele;\n}","import createElement from '../utils/create-element';\n\nconst playBtn = createElement('span', 'wiki-events-play');\nplayBtn.appendChild(document.createTextNode('▶'));\n\nconst controlsWrapper = createElement('span', 'wiki-events-controls');\ncontrolsWrapper.appendChild(playBtn);\n\nexport { playBtn };\nexport default controlsWrapper;\n","import { _playing, _paused, _currentFrame } from '../constants';\nimport { playBtn } from '../elements/controls';\n\nexport default function() {\n  const onCompleteCallback = () => {\n    playBtn.innerHTML = '▶';\n    this[_playing] = false;\n    this[_paused] = false;\n  };\n  onCompleteCallback.__internal_wiki_events__ = true;\n\n  playBtn.addEventListener('click', () => {\n    if (this[_playing] && !this[_paused]) {\n      playBtn.innerHTML = '▶';\n\n      this.pause();\n    } else {\n      playBtn.innerHTML = '| |';\n\n      this[this[_paused] ? 'resume' : 'play']();\n    }\n  });\n  this.on('complete', onCompleteCallback);\n}\n","export default function(x, y, className) {\n  const div = document.createElement('div');\n  div.classList.add(className);\n  div.style.top = y+'px';\n  div.style.left = x+'px';\n\n  return div;\n}\n","import createElement from '../utils/create-element';\n\nconst cursor = createElement('img', 'wiki-events-cursor');\ncursor.src = 'data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMi4wMTEgNTEyLjAxMSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyLjAxMSA1MTIuMDExOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij4KPHBhdGggc3R5bGU9ImZpbGw6IzIxOTZGMzsiIGQ9Ik00MzQuMjE1LDM0NC40NjdMOTIuODgxLDMuMTM0Yy00LjE2LTQuMTcxLTEwLjkxNC00LjE3OS0xNS4wODUtMC4wMTkgIGMtMi4wMTEsMi4wMDYtMy4xMzksNC43MzEtMy4xMzQsNy41NzF2NDkwLjY2N2MwLjAwMyw0LjM4MiwyLjY4NSw4LjMxNiw2Ljc2Myw5LjkyYzQuMDgxLDEuNjAzLDguNzI3LDAuNTQ1LDExLjcxMi0yLjY2NyAgbDEzNS41MDktMTQ1LjkyaDE5OC4wMTZjNS44OTEsMC4wMTEsMTAuNjc1LTQuNzU3LDEwLjY4Ni0xMC42NDhDNDM3LjM1MywzNDkuMTk4LDQzNi4yMjYsMzQ2LjQ3Myw0MzQuMjE1LDM0NC40Njd6Ii8+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=';\n\nexport default cursor;\n","import {\n  _playing,\n  _paused,\n  _currentFrame,\n  _draw,\n  _player,\n  _playerDimensions,\n  events\n} from '../constants';\nimport createEventMarker from '../utils/create-event-marker';\nimport cursor from '../elements/cursor';\n\nfunction draw() {\n  if (this[_currentFrame] < this.frames.length\n    && this[_playing]\n    && !this[_paused]\n  ) {\n    const currentEvent = this.frames[this[_currentFrame]];\n    cursor.style.display = 'block';\n\n    switch (currentEvent.eventType) {\n      case 'mouseup':\n        this[_player].appendChild(createEventMarker(currentEvent.x, currentEvent.y, 'mouseup'));\n        break;\n      case 'mousedown':\n        this[_player].appendChild(createEventMarker(currentEvent.x, currentEvent.y, 'mousedown'));\n        break;\n      case 'dblclick':\n        this[_player].appendChild(createEventMarker(currentEvent.x, currentEvent.y, 'dblclick'));\n        break;\n    }\n\n    cursor.style.top = currentEvent.y+'px';\n    cursor.style.left = currentEvent.x+'px';\n\n    events.progress.forEach(cb => cb(this[_currentFrame]));\n    this[_currentFrame]++;\n    setTimeout(() => window.requestAnimationFrame(this[_draw]), 1000 / 60);\n  }\n\n  if (this[_currentFrame] === this.frames.length) {\n    events.complete.forEach(cb => cb(this[_currentFrame]));\n    cursor.style.display = 'none';\n  }\n}\n\nexport default draw;\n","import controlsWrapper from '../elements/controls';\nimport createElement from '../utils/create-element';\nimport cursor from '../elements/cursor';\n\nexport default function(width, height, documentContent) {\n  const wikiEventsPlayerWrapper = createElement('div', 'wiki-events-player-wrapper');\n  wikiEventsPlayerWrapper.style.width = `${width + 40}px`;\n  wikiEventsPlayerWrapper.style.height = `${height + 40}px`;\n\n  const wikiEventsPlayer = createElement('iframe', 'wiki-events-player');\n  wikiEventsPlayer.scrolling=\"no\";\n  wikiEventsPlayer.width = `${width}px`;\n  wikiEventsPlayer.height = `${height}px`;\n  wikiEventsPlayer.onload = () => {\n    const doc = wikiEventsPlayer.contentDocument;\n\n    doc.open();\n    doc.write(documentContent.outerHTML);\n    doc.close();\n  };\n\n  wikiEventsPlayerWrapper.appendChild(wikiEventsPlayer);\n  wikiEventsPlayerWrapper.appendChild(cursor);\n  wikiEventsPlayerWrapper.appendChild(controlsWrapper);\n\n  return wikiEventsPlayerWrapper;\n}\n","const stylesheet = document.createElement('style');\nstylesheet.type = 'text/css';\nstylesheet.appendChild(\n  document.createTextNode(\n    `\n      .wiki-events-player-wrapper {\n        transform: scale(0.7654321);\n        padding: 0 25px;\n        display: flex;\n        justify-content: center;\n        border: 1px solid #E1E1E1;\n        box-shadow: 0 19px 38px rgba(0, 0, 0, 0.30), 0 15px 12px rgba(0, 0, 0, 0.22);\n      }\n      .wiki-events-player-wrapper>.wiki-events-cursor {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 16px;\n        height: 16px;\n      }\n      .wiki-events-player-wrapper>.wiki-events-player {\n        border: 0;\n      }\n      .wiki-events-player-wrapper>.mouseup {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 15px;\n        height: 15px;\n        border-radius: 50%;\n        border: 1px solid rgb(0, 200, 255);\n        z-index: 999999;\n        opacity: 0.5;\n      }\n      .wiki-events-player-wrapper>.mousedown {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 16px;\n        height: 16px;\n        border-radius: 50%;\n        background-color: rgb(0, 200, 255);\n        z-index: 999998;\n        opacity: 0.1;\n      }\n      .wiki-events-player-wrapper>.dblclick {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 16px;\n        height: 16px;\n        border-radius: 50%;\n        background-color: rgb(0, 200, 255);\n        z-index: 999999;\n        opacity: 0.5;\n      }\n      .wiki-events-player-wrapper>.wiki-events-controls {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n        height: 40px;\n      }\n      .wiki-events-player-wrapper>.wiki-events-controls>.wiki-events-play {\n        color: rgba(0, 0, 0, 0.5);\n      }\n      .wiki-events-player-wrapper>.wiki-events-controls>.wiki-events-play:hover {\n        color: rgba(0, 0, 0, 1);\n        cursor: pointer;\n      }\n    `\n  )\n);\n\nexport default stylesheet;\n","import { _running, _paused, _eventHandler, _streamHandler } from './constants/symbols';\nimport defaultConfig from './constants/config';\nimport eventHandler from './utils/event-handler';\nimport store from './store';\nimport streamHandler from './utils/stream-handler';\nimport $wp from 'wiki-events-player';\n\nclass WikiEvents {\n  constructor(config = {}) {\n    this.config = { ...defaultConfig, ...config };\n    this[_eventHandler] = eventHandler.bind(this);\n    this[_streamHandler] = streamHandler.bind(this);\n    this[_paused] = false;\n    this[_running] = false;\n    store.document = document.documentElement.cloneNode(true);\n    store.dimensions = {\n      width: window.outerWidth,\n      height: window.outerHeight\n    };\n    store.since = Date.now();\n\n    if (!this.config.defer) {\n      this.start();\n    }\n\n    return this;\n  }\n\n  start() {\n    if (!this[_running]) {\n      const isStream = typeof this.config.stream === 'function';\n\n      if (isStream) {\n        this.config.stream({\n          type: 'config',\n          ...store\n        });\n      }\n\n      this.config.trackEvents.forEach(ev => document.addEventListener(\n        ev, isStream ? this[_streamHandler] : this[_eventHandler])\n      );\n\n      return this;\n    }\n  }\n\n  pause() {\n    this[_paused] = true;\n\n    return this;\n  }\n\n  resume() {\n    this[_paused] = false;\n\n    return this;\n  }\n\n  stop() {\n    this.config.trackEvents.forEach(ev => {\n      document.removeEventListener(ev, this[_streamHandler]);\n      document.removeEventListener(ev, this[_eventHandler]);\n    });\n\n    return this;\n  }\n\n  peekFrames() {\n    return store.frames;\n  }\n\n  dump() {\n    return store;\n  }\n\n  static play(record) {\n    new $wp(record, { dimensions: record.dimensions });\n  }\n}\n\nmodule.exports = WikiEvents;\n"]}